"use strict";var newMap,restaurant=void 0;document.addEventListener("DOMContentLoaded",function(e){initMap()}),initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiYWxpbWFobW91ZDciLCJhIjoiY2pqdm1ncXQ4MHR4ZjNycnJobXFoYmwweiJ9.TMWFJkGRL-d-OYFfOfKbdw",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img";var n=DBHelper.imageUrlForRestaurant(e),a="jpg",r=document.createElement("source"),i=document.createElement("source"),o=document.createElement("img");r.setAttribute("media","(min-width: 701px)"),r.setAttribute("srcset",n+"-800_2x."+a+" 2x, "+n+"-800_1x."+a+" 1x"),i.setAttribute("media","(max-width: 700px)"),i.setAttribute("srcset",n+"-400_2x."+a+" 2x, "+n+"-400_1x."+a+" 1x"),o.className="restaurant-img",o.src=n+"-800_1x."+a,o.setAttribute("srcset",n+"-800_2x."+a+" 2x, "+n+"-400_1x."+a+" 1x"),o.alt="An Image of "+e.name+" Restaurant",t.append(r),t.append(i),t.append(o),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,a.appendChild(r);var i=document.createElement("td");i.innerHTML=e[n],a.appendChild(i),t.appendChild(a)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",n.setAttribute("tabindex","0"),t.appendChild(n),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void t.appendChild(a)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("div");n.className="name-date-container",n.setAttribute("role","heading"),t.appendChild(n);var a=document.createElement("p");a.innerHTML=e.name,a.className="review-name",n.appendChild(a);var r=document.createElement("p");r.innerHTML=e.date,r.className="review-date",n.appendChild(r);var i=document.createElement("p");i.innerHTML="Rating: "+e.rating,i.className="rating",t.appendChild(i);var o=document.createElement("p");return o.innerHTML=e.comments,t.appendChild(o),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,n.setAttribute("aria-label",e.name+" Restaurant"),n.setAttribute("aria-current","page"),t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};